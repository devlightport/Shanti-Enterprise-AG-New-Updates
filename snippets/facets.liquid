{% comment %}
		Renders facets (filtering and sorting)

		Accepts:
		- results: {Object} Collection or Search object
		- enable_filtering: {Boolean} Show filtering when true
		- enable_sorting: {Boolean} Show sorting when true

		Usage:
	{% render 'facets', results: collection, enable_filtering: true, enable_sorting: true %}
{% endcomment %}

{%- liquid
	assign sort_by = results.sort_by | default: results.default_sort_by
	assign total_active_values = 0
	if results.url
		assign results_url = results.url
	else
		assign terms = results.terms | escape
		assign results_url = '?q=' | append: terms | append: '&options%5Bprefix%5D=last&sort_by=' | append: sort_by
	endif

	for filter in results.filters
		assign total_active_values = total_active_values | plus: filter.active_values.size
	endfor
-%}

<div class="facets-container-main {% if enable_filtering == false %} facets-container_no-filter{% endif %} facets-container--{{ filter_type }}">
	<facet-filters-form class="facets small-hide">
		<form
			id="FacetFiltersForm"
			class="facets__form facets__form--{{ filter_type }}"
		>
			{%- if results.terms -%}
				<input type="hidden" name="q" value="{{ results.terms | escape }}">
				<input name="options[prefix]" type="hidden" value="last">
			{%- endif -%}
			<div class="facets__top facets__top--{{ filter_type }}">
				{% liquid
					assign enable_per_row_button = section.settings.enable_per_row_button
				%}
				{% if enable_filtering and filter_type == 'drawer' %}
					<button
						class="facets__button-show no-js-hidden focus-inset facets__selected subtitle"
						type="button"
					>
						{% render 'icon-filter' %}
						<span class="label-hide hidden">
							{{- 'products.facets.hide_filters' | t -}}
						</span>
						<span class="label-show">
							{{- 'products.facets.show_filters' | t -}}
						</span>
						{% if total_active_values > 0 %}
							<span class="checked-filters-count no-js-hidden"
								>- {{ total_active_values -}}
							</span>
						{% endif %}
					</button>
				{% endif %}
				<div class="facets__sort-wrapper">
					<div class="facets__product-count" role="status">
						<div class="facets__product-count-text">
							<span id="ProductCountDesktop" class="small-font">
								{%- if results.results_count -%}
									{{
										'templates.search.results_with_count'
										| t: terms: results.terms, count: results.results_count
									}}
								{%- else -%}
									{{
										'products.facets.product_count'
										| t:
											product_count: results.products_count,
											count: results.all_products_count
									}}
								{%- endif -%}
							</span>
						</div>
					</div>
					{% if enable_per_row_button %}
						<div class="per-row__wrapper">
							<div class="per-row__label subtitle">
								{{ 'sections.collection_list.view' | t }}:
							</div>
							<div class="per-row__buttons">
								<button
									type="button"
									class="per-row__button{% if section.settings.default_per_row == 'large' %} active{% endif %}"
									data-per-row="large"
									aria-label="Per row button large"
								>
									<svg
										width="16"
										height="16"
										viewBox="0 0 16 16"
										fill="none"
										xmlns="http://www.w3.org/2000/svg"
									>
										<rect width="4" height="4" rx="0.5" fill="currentColor"/>
										<rect x="6" width="4" height="4" rx="0.5" fill="currentColor"/>
										<rect x="12" width="4" height="4" rx="0.5" fill="currentColor"/>
										<rect y="6" width="4" height="4" rx="0.5" fill="currentColor"/>
										<rect x="6" y="6" width="4" height="4" rx="0.5" fill="currentColor"/>
										<rect x="12" y="6" width="4" height="4" rx="0.5" fill="currentColor"/>
										<rect y="12" width="4" height="4" rx="0.5" fill="currentColor"/>
										<rect x="6" y="12" width="4" height="4" rx="0.5" fill="currentColor"/>
										<rect x="12" y="12" width="4" height="4" rx="0.5" fill="currentColor"/>
									</svg>
								</button>
								<button
									type="button"
									class="per-row__button{% if section.settings.default_per_row == 'small' %} active{% endif %}"
									data-per-row="small"
									aria-label="Per row button small"
								>
									<svg
										width="16"
										height="16"
										viewBox="0 0 16 16"
										fill="none"
										xmlns="http://www.w3.org/2000/svg"
									>
										<g>
										<rect width="7" height="7" rx="0.5" fill="currentColor"/>
										<rect x="9" width="7" height="7" rx="0.5" fill="currentColor"/>
										<rect y="9" width="7" height="7" rx="0.5" fill="currentColor"/>
										<rect x="9" y="9" width="7" height="7" rx="0.5" fill="currentColor"/>
										</g>
									</svg>
								</button>
							</div>
						</div>
					{% endif %}
					{%- if enable_sorting -%}
						<div class="facet-filters facets-sorting sorting">
							<div class="facets-sorting__label subtitle">
								{{ 'products.facets.sort_by_label' | t }}
							</div>
							<div class="facet-filters__field facets-sorting__field">
								<div class="sorting-select subtitle">
									{%- assign sort_by = results.sort_by
										| default: results.default_sort_by
									-%}
									<select
										name="sort_by"
										class="select__select"
										id="SortBy"
										aria-describedby="a11y-refresh-page-message"
									>
										{%- for option in results.sort_options -%}
											<option
												value="{{ option.value | escape }}"
												{% if option.value == sort_by %}
													selected="selected"
												{% endif %}
											>
												{{ option.name | escape }}
											</option>
										{%- endfor -%}
									</select>
									<svg
										class="icon icon-arrow-small"
										focusable="false"
										width="14"
										height="14"
										viewBox="0 0 14 14"
										fill="none"
										xmlns="http://www.w3.org/2000/svg"
									>
										<path d="M10.5 5.25L7 8.75L3.5 5.25" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"/>
									</svg>
									{% comment %}{% render 'icon-arrow-small' %}{% endcomment %}
								</div>
							</div>
							<noscript>
								<button type="submit" class="button button--small focus-inset">
									{{ 'products.facets.sort_button' | t }}
								</button>
							</noscript>
						</div>
					{%- endif -%}
				</div>
			</div>
			{% if enable_filtering %}
				{% if filter_type == 'drawer' %}
					<div class="facets__container__overlay"></div>
				{% endif %}
				<div class="facets__container">
					<div class="active-facets active-facets-desktop">
						{% assign active_facets = false %}
						{%- for filter in results.filters -%}
							{% if filter.active_values.size > 0
								or filter.min_value.value != null
								or filter.max_value.value != null
							%}
								{% assign active_facets = true %}
								{% break %}
							{% endif %}
						{% endfor %}

						<div class="active-facets__wrapper {% if active_facets %} active-facets__wrapper_margin {% endif %}">
							{%- for filter in results.filters -%}
								{%- for value in filter.active_values -%}
									<facet-remove>
										<a
											href="{{ value.url_to_remove }}"
											class="active-facets__button focus-inset small-font"
										>
											<span class="active-facets__button-inner">
												<span>{{ filter.label }}:</span>
												{{ value.label | escape }}
												<span class="active-facets__button-close">
													{%- render 'icon-close' -%}
												</span>
											</span>
											<span class="visually-hidden">
												{{- 'products.facets.clear_filter' | t -}}
											</span>
										</a>
									</facet-remove>
								{%- endfor -%}
								{% if filter.type == 'price_range' %}
									{%- if filter.min_value.value != null
										or filter.max_value.value != null
									-%}
										<facet-remove>
											<a
												href="{{ filter.url_to_remove }}"
												class="active-facets__button focus-inset small-font"
											>
												<span class="active-facets__button-inner">
													<span>{{ filter.label }}:</span>
													{%- if filter.min_value.value -%}
														{{ filter.min_value.value | money }}
													{%- else -%}
														{{ 0 | money }}
													{%- endif -%}
													-
													{%- if filter.max_value.value -%}
														{{ filter.max_value.value | money }}
													{%- else -%}
														{{ filter.range_max | money }}
													{%- endif -%}
													<span class="active-facets__button-close">
														{%- render 'icon-close' -%}
													</span>
												</span>
												<span class="visually-hidden">
													{{- 'products.facets.clear_filter' | t -}}
												</span>
											</a>
										</facet-remove>
									{%- endif -%}
								{% endif %}
							{%- endfor -%}
							<facet-remove>
								<a
									href="{{ results_url }}"
									class="active-facets__button-remove focus-inset button button--simple"
								>
									<span>{{ 'products.facets.clear_all' | t }}</span>
								</a>
							</facet-remove>
						</div>
						{% if filter_type == 'drawer' %}
							<button type="button" class="close-drawer">
								{% render 'icon-close' %}
							</button>
						{% endif %}
					</div>
					<div
						id="FacetsWrapperDesktop"
						class=" facets__wrapper facets__wrapper--{{ filter_type }}"
					>
						{%- for filter in results.filters -%}
							{% liquid
                assign presentation = filter.presentation | default: default_presentation
              %}
							{% case filter.type %}
								{% when 'boolean', 'list' %}
									{% liquid
										assign color_trigger = settings.trigger_swatch | handle | strip
										assign name_option = filter.label | handle | strip
									%}
									<details
										id="Details-{{ forloop.index }}-{{ section.id }}"
										class="disclosure-has-popup facets__disclosure js-filter{% if forloop.last %} last-item{% endif %}"
										data-index="{{ forloop.index }}"
										open
									>
										<summary class="facets__summary focus-inset">
											<div class="facets__summary-inner">
												<span class="subtitle facets__summary-title">
													{{ filter.label | escape }}
												</span>
												<facet-remove>
													<a
														href="{{ filter.url_to_remove }}"
														class="facets__reset button button--simple"
													>
														{{ 'products.facets.reset' | t }}
													</a>
												</facet-remove>
											</div>
										</summary>
										<div
											id="Facet-{{ forloop.index }}-{{ section.id }}"
											class="facets__display"
										>
											<ul
												class="
													facets__list list-unstyled
													{% if settings.type_color_swatch == 'custom' and color_trigger == name_option -%} facets__list--color
													{% elsif settings.type_color_swatch == 'standart' and presentation == 'swatch' %} facets__list--color
													{% elsif presentation == 'image' %} facets__list--image {%- endif -%}
												"
												role="list"
												style="--image_filter_columns: {{ image_filter_columns }};"
											>
												{%- for value in filter.values -%}
													{% liquid
														if settings.type_color_swatch == 'custom' and color_trigger == name_option
															assign color_value = value.value | handle | strip
															assign color_value_custom = color_value | remove: '-'

															if settings.custom_colors != blank
																assign custom_colors_string = settings.custom_colors | strip
																assign custom_colors_obj = custom_colors_string | newline_to_br | split: '<br />'

																for obj in custom_colors_obj
																	assign obj_strip = obj | strip
																	assign obj_key = obj_strip | split: ':' | first
																	assign obj_value = obj_strip | split: ':' | last
																	assign obj_color_name = obj_key | handle | strip

																	if color_value == obj_color_name
																		assign obj_color_value = obj_value | strip
																		if obj_color_value contains 'gradient'
																			assign color_value_custom = obj_color_value
																		else
																			assign color_value_custom = obj_color_value | remove: '-'
																		endif
																		break
																	endif
																endfor
															endif
														endif

														assign swatch_value = null
														if presentation == 'swatch'
															assign swatch = value.swatch
															if swatch.image
																assign image_url = swatch.image | image_url: width: 50
																assign swatch_value = 'url(' | append: image_url | append: ')'
																assign swatch_focal_point = swatch.image.presentation.focal_point
															elsif swatch.color
																assign swatch_value = 'rgb(' | append: swatch.color.rgb | append: ')'
															endif
														endif
													%}
													<li
														class="
															list-menu__item facets__item
															{% if settings.type_color_swatch == 'custom' and color_trigger == name_option -%} facets__item--color
															{% elsif settings.type_color_swatch == 'standart' and presentation == 'swatch' %} facets__item--color
															{% elsif presentation == 'image' %} facets__item--image {%- endif -%}
														"
														{% if settings.type_color_swatch == 'custom'
															and color_trigger == name_option
														%}
															{% liquid
																if color_value_custom == 'white' or color_value_custom == '#fff' or color_value_custom == '#ffffff' or color_value_custom == '255,255,255' or color_value_custom == '255,255,255,1'
																	assign swatch_bg = 'rgb(var(--color-border))'
																	assign disable_color = 'rgb(var(--color-foreground-title))'
																	assign checkbox_bg = 'rgb(var(--color-border))'
																	assign swatch_border = 'transparent'
																else
																	assign swatch_bg = 'transparent'
																	assign disable_color = 'white'
																	assign checkbox_bg = 'white'
																	assign swatch_border = 'rgba(var(--color-border),0.5)'
																endif
															%}
															style="--swatch-color: {{ color_value_custom | remove: '-' }}; --swatch-bg: {{ swatch_bg }}; --swatch-border: {{ swatch_border }};--disable-color:{{ disable_color }};--checkbox-bg: {{ checkbox_bg }}; border-radius: {{ settings.swatch_border_radius }}%"
														{% elsif settings.type_color_swatch == 'standart'
															and presentation == 'swatch'
														%}
															style="
																--border-radius: {{ settings.swatch_border_radius }}px;
																--swatch-color: {{ swatch_value }};
																{% if swatch_focal_point %} --swatch-focal-point: {{ swatch_focal_point }}; {% endif %}
															"
														{% endif %}
													>
														<input
															type="checkbox"
															class="focus-inset"
															name="{{ value.param_name }}"
															value="{{ value.value }}"
															id="Filter-{{ filter.label | escape }}-{{ forloop.index }}"
															{% if value.active %}
																checked
															{% endif %}
															{% if value.count == 0
																and value.active == false
															%}
																disabled
															{% endif %}
														>
														<label
															for="Filter-{{ filter.label | escape }}-{{ forloop.index }}"
															class="
																facet-checkbox{% if value.count == 0 and value.active == false %} facet-checkbox--disabled{% endif %}
																{%- if settings.type_color_swatch == 'custom' and color_trigger == name_option -%} facet-checkbox--color
																{%- elsif settings.type_color_swatch == 'standart' and presentation == 'swatch' -%} facet-checkbox--color
																{% elsif presentation == 'image' %} facet-checkbox--image {%- endif -%}
															"
														>
															{%- if presentation == 'image' -%}
																<div
																	class="facets__image-wrapper"
																	style="
																		--image_filter_ratio: {{ image_filter_ratio }};
																		--image_filter_fit: {{ image_filter_fit }};
																	"
																>
																	{% liquid
																		assign width = 1000 | divided_by: image_filter_columns
																	%}
																	{%- if value.image -%}
																		{{
																			value.image
																			| image_url: width: width
																			| image_tag:
																				class: 'facets__image',
																				alt: value.alt
																		}}
																	{%- endif -%}
																</div>
															{% else %}

																{% if settings.type_color_swatch == 'custom'
																	and presentation == 'text'
																	and color_trigger == name_option
																%}
																	<span
																		class="facet-checkbox-swatch"
																		style="--swatch-border-radius: {{ settings.swatch_border_radius }}%"
																	></span>
																{% elsif settings.type_color_swatch
																		== 'standart'
																		and presentation == 'swatch'
																	and color_trigger == name_option
																%}
																	<span
																		class="facet-checkbox-swatch"
																		style="--swatch-border-radius: {{ settings.swatch_border_radius }}%"
																	></span>
																{% endif %}

																<span
																	class="facet-checkbox__label small-font"
																>
																	{{ value.label | escape }}
																</span>
															{% endif %}
														</label>
													</li>
												{%- endfor -%}
											</ul>
										</div>
									</details>
								{% when 'price_range' %}
									{% liquid
										assign currencies_using_comma_decimals = 'ANG,ARS,BRL,BYN,BYR,CLF,CLP,COP,CRC,CZK,DKK,EUR,HRK,HUF,IDR,ISK,MZN,NOK,PLN,RON,RUB,SEK,TRY,UYU,VES,VND' | split: ','
										assign uses_comma_decimals = false
										if currencies_using_comma_decimals contains cart.currency.iso_code
											assign uses_comma_decimals = true
										endif
									%}

									{%- assign max_price_amount = filter.range_max
										| money
										| strip_html
										| escape
									-%}

									{% if filter.range_max != 0 %}
										<details
											id="Details-{{ forloop.index }}-{{ section.id }}"
											class="disclosure-has-popup facets__disclosure js-filter{% if forloop.last %} last-item{% endif %}"
											data-index="{{ forloop.index }}"
											open
										>
											<summary class="facets__summary">
												<div class="facets__summary-inner">
													<span class="subtitle facets__summary-title">
														{{ filter.label | escape }}
													</span>
													<facet-remove>
														<a
															href="{{ filter.url_to_remove }}"
															class="facets__reset button button--simple"
														>
															{{ 'products.facets.reset' | t }}
														</a>
													</facet-remove>
												</div>
											</summary>
											<div
												id="Facet-{{ forloop.index }}-{{ section.id }}"
												class="facets__display"
											>
												{% comment %}
													{% if filter_type == 'drawer' %}
														<div class="facets__header">
															{%- assign max_price_amount = filter.range_max
																| money
																| strip_html
																| escape
															-%}
															<span class="facets__selected">
																{{
																	'sections.collection_template.max_price'
																	| t: price: max_price_amount
																}}
															</span>
															<facet-remove>
																<a
																	href="{{ filter.url_to_remove }}"
																	class="facets__reset button button--simple"
																>
																	{{ 'products.facets.reset' | t }}
																</a>
															</facet-remove>
														</div>
													{% endif %}
												{% endcomment %}
												<price-range class="facets__price">
													{% liquid
														if uses_comma_decimals
															assign max_price = filter.range_max | money_without_currency | replace: '.', '' | replace: ',', '.'
														else
															assign max_price = filter.range_max | money_without_currency | replace: ',', ''
														endif

														if uses_comma_decimals
															if filter.min_value.value
																assign current_price_min = filter.min_value.value | money_without_currency | replace: '.', '' | replace: ',', '.'
																assign range_min = current_price_min | divided_by: max_price | times: 100
															else
																assign range_min = 0
																assign current_price_min = 0
															endif
														else
															if filter.min_value.value
																assign current_price_min = filter.min_value.value | money_without_currency | replace: ',', ''
																assign range_min = current_price_min | divided_by: max_price | times: 100
															else
																assign range_min = 0
																assign current_price_min = 0
															endif
														endif

														if uses_comma_decimals
															if filter.max_value.value
																assign current_price_max = filter.max_value.value | money_without_currency | replace: '.', '' | replace: ',', '.'
																assign range_max = current_price_max | divided_by: max_price | times: 100
															else
																assign current_price_max = max_price
																assign range_max = 100
															endif
														else
															if filter.max_value.value
																assign current_price_max = filter.max_value.value | money_without_currency | replace: ',', ''
																assign range_max = current_price_max | divided_by: max_price | times: 100
															else
																assign current_price_max = max_price
																assign range_max = 100
															endif
														endif
													%}

													<div class="facets__price-wrapper">
														<div class="facets__price-rang-wrapper">
															<label
																class="field__label small-font"
																for="Filter-{{ filter.label | escape }}-GTE"
															>
																{{- 'products.facets.from' | t -}}
															</label>
															<div class="field">
																<span class="field__currency">
																	{{- cart.currency.symbol -}}
																</span>
																<input
																	class="field__input"
																	name="{{ filter.min_value.param_name }}"
																	id="Filter-{{ filter.label | escape }}-GTE"
																	{%- if filter.min_value.value -%}
																		{%- if uses_comma_decimals -%}
																			value="{{ filter.min_value.value | money_without_currency | replace: '.', '' | replace: ',', '.' }}"
																		{%- else -%}
																			value="{{ filter.min_value.value | money_without_currency | replace: ',', '' }}"
																		{% endif %}
																	{% else %}
																		value="0"
																	{%- endif -%}
																	type="number"
																	placeholder="0"
																	min="0"
																	{%- if uses_comma_decimals -%}
																		max="{{ filter.range_max | money_without_currency | replace: '.', '' | replace: ',', '.' }}"
																	{%- else -%}
																		max="{{ filter.range_max | money_without_currency | replace: ',', '' }}"
																	{% endif %}
																>
															</div>
														</div>
														<div class="facets__price-rang-wrapper">
															<label
																class="field__label small-font"
																for="Filter-{{ filter.label | escape }}-LTE"
															>
																{{- 'products.facets.to' | t -}}
															</label>
															<div class="field">
																<span class="field__currency">
																	{{- cart.currency.symbol -}}
																</span>
																<input
																	class="field__input"
																	name="{{ filter.max_value.param_name }}"
																	id="Filter-{{ filter.label | escape }}-LTE"
																	{%- if filter.max_value.value -%}
																		{%- if uses_comma_decimals -%}
																			value="{{ filter.max_value.value | money_without_currency | replace: '.', '' | replace: ',', '.' }}"
																		{%- else -%}
																			value="{{ filter.max_value.value | money_without_currency | replace: ',', '' }}"
																		{%- endif %}
																	{% else %}
																		value="{{ current_price_max }}"
																	{%- endif -%}
																	type="number"
																	min="0"
																	{%- if uses_comma_decimals -%}
																		placeholder="{{ filter.range_max | money_without_currency | replace: '.', '' | replace: ',', '.' }}"
																		max="{{ filter.range_max | money_without_currency | replace: '.', '' | replace: ',', '.' }}"
																	{%- else -%}
																		placeholder="{{ filter.range_max | money_without_currency | replace: ',', '' }}"
																		max="{{ filter.range_max | money_without_currency | replace: ',', '' }}"
																	{% endif %}
																>
															</div>
														</div>
													</div>
													<div
														class="facets__range"
														style="--range-min: {{ range_min }}%; --range-max: {{ range_max }}%"
													>
														<input
															type="range"
															value="{{ current_price_min }}"
															min="0"
															max="{{ max_price }}"
															class="field__range"
															aria-label="price range"
															step="0.01"
														>
														<input
															type="range"
															value="{{ current_price_max }}"
															min="0"
															max="{{ max_price }}"
															class="field__range"
															aria-label="price range"
															step="0.01"
														>
													</div>
												</price-range>
											</div>
										</details>
									{% endif %}
							{% endcase %}
						{%- endfor -%}
						<noscript>
							<button type="submit" class="facets__button button">
								{{ 'products.facets.filter_button' | t }}
							</button>
						</noscript>
					</div>
				</div>
			{% endif %}

			{% if results.current_vendor or results.current_type %}
				<input
					type="hidden"
					name="q"
					value="{{ results.current_vendor }}{{ results.current_type }}"
				>
			{% endif %}
		</form>
          {% comment %}my self start {% endcomment %}                               
         {% render 'self-category-collection' %}
            {% comment %}my self end {% endcomment %}              
	</facet-filters-form>

	<menu-drawer class="mobile-facets__wrapper" data-breakpoint="mobile">
		<details class="disclosure-has-popup medium-hide large-up-hide">
			<summary>
				<span class="mobile-facets__open button button--primary focus-inset">
					{% render 'icon-filter' %}
					{%- if enable_filtering or enable_sorting -%}
						<span>
							{%- if enable_filtering and enable_sorting -%}
								{{ 'products.facets.filter_and_sort' | t }}
							{%- elsif enable_filtering -%}
								{{ 'products.facets.filter_button' | t }}
							{%- elsif enable_sorting -%}
								{{ 'products.facets.sort_button' | t }}
							{%- endif -%}
						</span>
					{%- endif -%}
					{%- if total_active_values > 0 -%}
						<div class="count-bubble">
							{{ total_active_values }}
						</div>
					{%- endif -%}
				</span>
				<span
					tabindex="0"
					class="mobile-facets__close mobile-facets__close--no-js modal-close-buttonfocus-inset"
				>
					{%- render 'icon-close' -%}
				</span>
			</summary>
			<facet-filters-form>
				<form id="FacetFiltersFormMobile" class="mobile-facets">
					<div class="mobile-facets__inner">
						<div class="mobile-facets__header">
							<div class="mobile-facets__header-inner">
								<h2 class="mobile-facets__heading">
									{%- if enable_filtering and enable_sorting -%}
										{{ 'products.facets.filter_and_sort' | t }}
									{%- elsif enable_filtering -%}
										{{ 'products.facets.filter_button' | t }}
									{%- elsif enable_sorting -%}
										{{ 'products.facets.sort_button' | t }}
									{%- endif -%}
								</h2>
								<p class="mobile-facets__count">
									{%- if results.results_count -%}
										{{
											'templates.search.results_with_count'
											| t: terms: results.terms, count: results.results_count
										}}
									{%- else -%}
										{% comment %}
											{{
												'products.facets.product_count_simple'
												| t: count: results.products_count
											}}
										{% endcomment %}
										{{
											'products.facets.product_count'
											| t:
												product_count: results.products_count,
												count: results.all_products_count
										}}
									{%- endif -%}
								</p>
							</div>
						</div>
						<div class="mobile-facets__main">
							{% if enable_filtering %}
								{%- for filter in results.filters -%}
									{% liquid
                    assign presentation = filter.presentation | default: default_presentation
                  %}
									{% case filter.type %}
										{% when 'boolean', 'list' %}
											{% liquid
												assign color_trigger = settings.trigger_swatch | handle | strip
												assign name_option = filter.label | handle | strip
											%}
											<details
												id="Details-Mobile-{{ forloop.index }}-{{ section.id }}"
												class="mobile-facets__details js-filter"
												data-index="mobile-{{ forloop.index }}"
											>
												<summary class="mobile-facets__summary">
													<div>
														<span>{{ filter.label | escape }}</span>
														<span class="mobile-facets__arrow no-js-hidden">
															{%- render 'icon-arrow-small' -%}
														</span>
														<noscript>{% render 'icon-arrow-small' %}</noscript>
													</div>
												</summary>
												<div
													id="FacetMobile-{{ forloop.index }}-{{ section.id }}"
													class="mobile-facets__submenu"
												>
													<button
														class="mobile-facets__close-button link link--text focus-inset"
														aria-expanded="true"
														type="button"
													>
														{% render 'icon-arrow-small' %}
														{{ filter.label | escape }}
													</button>
													<ul
														class="mobile-facets__list list-unstyled 
														{% if settings.type_color_swatch == 'custom' and color_trigger == name_option -%} mobile-facets__list--color 
														{% elsif settings.type_color_swatch == 'standart' and presentation == 'swatch' %} mobile-facets__list--color 
														{% elsif presentation == 'image' %} mobile-facets__list--image {%- endif -%}"
														role="list"
														style= "--image_filter_columns: {{ image_filter_columns }};"
													>
														{%- for value in filter.values -%}
															{% liquid
																if settings.type_color_swatch == 'custom' and color_trigger == name_option
                                  assign color_value = value.value | handle | strip
                                  assign color_value_custom = color_value | remove: '-'

                                  if settings.custom_colors != blank
                                    assign custom_colors_string = settings.custom_colors | strip
                                    assign custom_colors_obj = custom_colors_string | newline_to_br | split: '<br />'

                                    for obj in custom_colors_obj
                                      assign obj_strip = obj | strip
                                      assign obj_key = obj_strip | split: ':' | first
                                      assign obj_value = obj_strip | split: ':' | last
                                      assign obj_color_name = obj_key | handle | strip

                                      if color_value == obj_color_name
                                        assign obj_color_value = obj_value | strip
                                        if obj_color_value contains 'gradient'
																				assign color_value_custom = obj_color_value
                                        else
																				assign color_value_custom = obj_color_value | remove: '-'
                                        endif
                                        break
                                      endif
                                    endfor
                                  endif
                                endif

                                assign swatch_value = null
                                if presentation == 'swatch'
                                  assign swatch = value.swatch
                                  if swatch.image
                                    assign image_url = swatch.image | image_url: width: 50
                                    assign swatch_value = 'url(' | append: image_url | append: ')'
                                    assign swatch_focal_point = swatch.image.presentation.focal_point
                                  elsif swatch.color
                                    assign swatch_value = 'rgb(' | append: swatch.color.rgb | append: ')'
                                  endif
                                endif
															%}
															<li
																class="
																	mobile-facets__item list-menu__item
																	{% if settings.type_color_swatch == 'custom' and color_trigger == name_option -%} mobile-facets__item--color 
                                  {% elsif settings.type_color_swatch == 'standart' and presentation == 'swatch' %} mobile-facets__item--color 
                                  {% elsif presentation == 'image' %} mobile-facets__item--image {%- endif -%}
																"
																{% if settings.type_color_swatch == 'custom' and color_trigger == name_option %}
																	{% liquid
																		if color_value_custom == 'white' or color_value_custom == '#fff' or color_value_custom == '#ffffff' or color_value_custom == '255,255,255' or color_value_custom == '255,255,255,1'
																			assign swatch_bg = 'rgb(var(--color-border))'
																			assign disable_color = 'rgb(var(--color-foreground-title))'
																			assign checkbox_bg = 'rgb(var(--color-border))'
																			assign checkbox_bg = 'white'
																		else
																			assign swatch_bg = 'transparent'
																			assign disable_color = 'white'
																		endif
																	%}
																	style="--swatch-color: {{ color_value_custom | remove: '-' }}; --swatch-bg: {{ swatch_bg }};--disable-color:{{ disable_color }};--checkbox-bg: {{ checkbox_bg }}; border-radius: {{ settings.swatch_border_radius }}%"
                                {% elsif settings.type_color_swatch == 'standart' and presentation == 'swatch' %}
                                  style="
                                    --border-radius: {{ settings.swatch_border_radius }}px;
                                    --swatch-color: {{ swatch_value }};
                                    {% if swatch_focal_point %} --swatch-focal-point: {{ swatch_focal_point }}; {% endif %}
                                  "
                                {% endif %}
															>
																<input
																	class="mobile-facets__checkbox"
																	type="checkbox"
																	name="{{ value.param_name }}"
																	value="{{ value.value }}"
																	id="Filter-{{ filter.label | escape }}-mobile-{{ forloop.index }}"
																	{% if value.active %}
																		checked
																	{% endif %}
																	{% if value.count == 0
																		and value.active == false
																	%}
																		disabled
																	{% endif %}
																>
																<label
																	for="Filter-{{ filter.label | escape }}-mobile-{{ forloop.index }}"
																	class="mobile-facets__label{% if value.count == 0 and value.active == false %} mobile-facets__label--disabled{% endif %}
																		{%- if settings.type_color_swatch == 'custom' and color_trigger == name_option -%} facet-checkbox facet-checkbox--color 
																		{%- elsif settings.type_color_swatch == 'standart' and presentation == 'swatch' -%} facet-checkbox facet-checkbox--color 
																		{% elsif presentation == 'image' %} facet-checkbox facet-checkbox--image {%- endif -%}
																	"
																>
																	{%- if presentation == 'image' -%}
                                    <div class="facets__image-wrapper" 
                                      style = "--image_filter_ratio: {{ image_filter_ratio }}; 
                                        --image_filter_fit: {{ image_filter_fit }};"
                                    >
                                      {% liquid
                                        assign width = 1000 | divided_by: image_filter_columns
                                      %}
                                      {% capture sizes %}
                                        calc((100vw - 50px) / {{ image_filter_columns }})
                                      {% endcapture %}
                                      {%- if value.image -%}
                                        {{
                                          value.image
                                          | image_url: width: value.image.width
                                          | image_tag: class: 'facets__image', alt: value.alt, sizes: sizes
                                        }}
                                      {%- endif -%}
                                    </div>
                                  {% else %}
																	{% if settings.type_color_swatch == 'custom'
																		and presentation == 'text'
																		and color_trigger == name_option
																	%}
																		<span
																			class="facet-checkbox-swatch"
																			style="--swatch-border-radius: {{ settings.swatch_border_radius }}%"
																		></span>
																	{% elsif settings.type_color_swatch
																			== 'standart'
																			and presentation == 'swatch'
																		and color_trigger == name_option
																	%}
																		<span
																			class="facet-checkbox-swatch"
																			style="--swatch-border-radius: {{ settings.swatch_border_radius }}%"
																		></span>
																	{% endif %}

																	<span
																		class="facet-checkbox__label small-font"
																	>
																		{{ value.label | escape }}
																	</span>
																{% endif %}
																</label>
															</li>
														{%- endfor -%}
													</ul>
													<div class="no-js-hidden mobile-facets__footer">
														<facet-remove>
															<a
																href="{{ results_url }}"
																class="mobile-facets__clear focus-inset button button--simple"
															>
																{{- 'products.facets.clear' | t -}}
															</a>
														</facet-remove>
														<button
															type="button"
															class="no-js-hidden button button--primary focus-inset"
															onclick="this.closest('.mobile-facets__wrapper').querySelector('summary').click()"
														>
															{{ 'products.facets.apply' | t }}
														</button>
														<noscript>
															<button class="button button--primary focus-inset">
																{{ 'products.facets.apply' | t }}
															</button>
														</noscript>
													</div>
												</div>
											</details>
										{% when 'price_range' %}
											<details
												id="Details-Mobile-{{ forloop.index }}-{{ section.id }}"
												class="mobile-facets__details js-filter"
												data-index="mobile-{{ forloop.index }}"
											>
												<summary class="mobile-facets__summary">
													<div>
														<span>{{ filter.label | escape }}</span>
														<span class="mobile-facets__arrow no-js-hidden">
															{%- render 'icon-arrow-small' -%}
														</span>
														<noscript>{% render 'icon-arrow-small' %}</noscript>
													</div>
												</summary>
												<div
													id="FacetMobile-{{ forloop.index }}-{{ section.id }}"
													class="mobile-facets__submenu"
												>
													<button
														class="mobile-facets__close-button link link--text focus-inset"
														aria-expanded="true"
														type="button"
													>
														{% render 'icon-arrow-small' %}
														{{ filter.label | escape }}
													</button>
													<p class="mobile-facets__info">
														{{
															'sections.collection_template.max_price'
															| t: price: max_price_amount
														}}
													</p>
													<price-range class="facets__price">
														<div class="facets__price-wrapper">
															<div class="field">
																<input
																	class="field__input"
																	name="{{ filter.min_value.param_name }}"
																	id="Mobile-Filter-{{ filter.label | escape }}-GTE"
																	{%- if filter.min_value.value -%}
																		{%- if uses_comma_decimals -%}
																			value="{{ filter.min_value.value | money_without_currency | replace: '.', '' | replace: ',', '.' }}"
																		{%- else -%}
																			value="{{ filter.min_value.value | money_without_currency | replace: ',', '' }}"
																		{% endif %}
																	{% else %}
																		value="0"
																	{%- endif -%}
																	type="number"
																	placeholder="0"
																	min="0"
																	max="{{ filter.range_max | divided_by: 100 | ceil }}"
																>
															</div>
															<div class="field">
																<input
																	class="field__input"
																	name="{{ filter.max_value.param_name }}"
																	id="Mobile-Filter-{{ filter.label | escape }}-LTE"
																	{%- if filter.max_value.value -%}
																		{%- if uses_comma_decimals -%}
																			value="{{ filter.max_value.value | money_without_currency | replace: '.', '' | replace: ',', '.' }}"
																		{%- else -%}
																			value="{{ filter.max_value.value | money_without_currency | replace: ',', '' }}"
																		{% endif %}
																	{% else %}
																		value="{{ current_price_max }}"
																	{%- endif -%}
																	type="number"
																	placeholder="{{ filter.range_max | divided_by: 100 | ceil }}"
																	min="0"
																	max="{{ filter.range_max | divided_by: 100 | ceil }}"
																>
															</div>
														</div>
														<div
															class="facets__range"
															style="--range-min: {{ range_min }}%; --range-max: {{ range_max }}%"
														>
															<input
																type="range"
																value="{{ current_price_min }}"
																min="0"
																max="{{ max_price }}"
																class="field__range"
																aria-label="price range"
															>
															<input
																type="range"
																value="{{ current_price_max }}"
																min="0"
																max="{{ max_price }}"
																class="field__range"
																aria-label="price range"
															>
														</div>
													</price-range>
													<div class="no-js-hidden mobile-facets__footer">
														<facet-remove>
															<a
																href="{{ results_url }}"
																class="mobile-facets__clear focus-inset button button--simple"
															>
																{{- 'products.facets.clear' | t -}}
															</a>
														</facet-remove>
														<button
															type="button"
															class="no-js-hidden button button--primary focus-inset"
															onclick="this.closest('.mobile-facets__wrapper').querySelector('summary').click()"
														>
															{{ 'products.facets.apply' | t }}
														</button>
														<noscript>
															<button class="button button--primary focus-inset">
																{{ 'products.facets.apply' | t }}
															</button>
														</noscript>
													</div>
												</div>
											</details>
									{% endcase %}
								{%- endfor -%}
							{% endif %}

							{%- if enable_sorting -%}
								<div
									class="mobile-facets__details js-filter"
									data-index="mobile-{{ forloop.index }}"
								>
									<div class="mobile-facets__summary">
										<div class="mobile-facets__sort">
											<label for="SortBy-mobile">
												{{- 'products.facets.sort_by_label' | t -}}
											</label>
											<div class="select field">
												<select
													name="sort_by"
													class="select__select"
													id="SortBy-mobile"
													aria-describedby="a11y-refresh-page-message"
												>
													{%- for option in results.sort_options -%}
														<option
															value="{{ option.value | escape }}"
															{% if option.value == sort_by %}
																selected="selected"
															{% endif %}
														>
															{{ option.name | escape }}
														</option>
													{%- endfor -%}
												</select>
												{% render 'icon-arrow-small' %}
											</div>
										</div>
									</div>
								</div>
							{%- endif -%}

							<div class="mobile-facets__footer">
								<facet-remove>
									<a
										href="{{ results_url }}"
										class="mobile-facets__clear focus-inset button button--simple"
									>
										{{- 'products.facets.clear_all' | t -}}
									</a>
								</facet-remove>
								<button
									type="button"
									class="no-js-hidden button button--primary focus-inset"
									onclick="this.closest('.mobile-facets__wrapper').querySelector('summary').click()"
								>
									{{ 'products.facets.apply' | t }}
								</button>
								<noscript>
									<button class="button button--primary focus-inset">
										{{ 'products.facets.apply' | t }}
									</button>
								</noscript>
							</div>
						</div>

						{% if results.current_vendor or results.current_type %}
							<input
								type="hidden"
								name="q"
								value="{{ results.current_vendor }}{{ results.current_type }}"
							>
						{% endif %}

						{%- if results.terms -%}
							<input
								type="hidden"
								name="q"
								value="{{ results.terms | escape }}"
							>
							<input name="options[prefix]" type="hidden" value="last">
						{%- endif -%}
					</div>
				</form>
			</facet-filters-form>
		</details>

		{% if enable_per_row_button %}
			<div class="per-row__wrapper per-row__wrapper-mobile">
				<div class="per-row__label subtitle">
					{{ 'sections.collection_list.view' | t }}:
				</div>
				<div class="per-row__buttons">
					<button
						type="button"
						class="per-row__button{% if section.settings.default_per_row == 'large' %} active{% endif %}"
						data-per-row="large"
						aria-label="Per row button large"
					>
						<svg
							width="16"
							height="16"
							viewBox="0 0 16 16"
							fill="none"
							xmlns="http://www.w3.org/2000/svg"
						>
							<rect width="4" height="4" rx="0.5" fill="currentColor"/>
							<rect x="6" width="4" height="4" rx="0.5" fill="currentColor"/>
							<rect x="12" width="4" height="4" rx="0.5" fill="currentColor"/>
							<rect y="6" width="4" height="4" rx="0.5" fill="currentColor"/>
							<rect x="6" y="6" width="4" height="4" rx="0.5" fill="currentColor"/>
							<rect x="12" y="6" width="4" height="4" rx="0.5" fill="currentColor"/>
							<rect y="12" width="4" height="4" rx="0.5" fill="currentColor"/>
							<rect x="6" y="12" width="4" height="4" rx="0.5" fill="currentColor"/>
							<rect x="12" y="12" width="4" height="4" rx="0.5" fill="currentColor"/>
						</svg>
					</button>
					<button
						type="button"
						class="per-row__button{% if section.settings.default_per_row == 'small' %} active{% endif %}"
						data-per-row="small"
						aria-label="Per row button small"
					>
						<svg
							width="16"
							height="16"
							viewBox="0 0 16 16"
							fill="none"
							xmlns="http://www.w3.org/2000/svg"
						>
							<g>
							<rect width="7" height="7" rx="0.5" fill="currentColor"/>
							<rect x="9" width="7" height="7" rx="0.5" fill="currentColor"/>
							<rect y="9" width="7" height="7" rx="0.5" fill="currentColor"/>
							<rect x="9" y="9" width="7" height="7" rx="0.5" fill="currentColor"/>
							</g>
						</svg>
					</button>
				</div>
			</div>
		{% endif %}
	</menu-drawer>

	<div class="active-facets active-facets-mobile medium-hide large-up-hide">
		{%- for filter in results.filters -%}
			{%- for value in filter.active_values -%}
				<facet-remove>
					<a
						href="{{ value.url_to_remove }}"
						class="active-facets__button focus-inset button button--simple"
					>
						<span class="active-facets__button-inner">
							<span>{{ filter.label }}:</span>
							{{ value.label | escape }}
							<span class="active-facets__button-close">
								{%- render 'icon-close' -%}
							</span>
							<span class="visually-hidden">
								{{- 'products.facets.clear_filter' | t -}}
							</span>
						</span>
					</a>
				</facet-remove>
			{%- endfor -%}

			{%- if filter.type == 'price_range' -%}
				{%- if filter.min_value.value != null
					or filter.max_value.value != null
				-%}
					<facet-remove>
						<a
							href="{{ filter.url_to_remove }}"
							class="active-facets__button focus-inset button button--simple"
						>
							<span class="active-facets__button-inner">
								<span>{{ filter.label }}:</span>
								{%- if filter.min_value.value -%}
									{{ filter.min_value.value | money }}
								{%- else -%}
									{{ 0 | money }}
								{%- endif -%}
								-
								{%- if filter.max_value.value -%}
									{{ filter.max_value.value | money }}
								{%- else -%}
									{{ filter.range_max | money }}
								{%- endif -%}
								<span class="active-facets__button-close">
									{%- render 'icon-close' -%}
								</span>
								<span class="visually-hidden">
									{{- 'products.facets.clear_filter' | t -}}
								</span>
							</span>
						</a>
					</facet-remove>
				{%- endif -%}
			{%- endif -%}
		{%- endfor -%}
		<facet-remove>
			<a
				href="{{ results_url }}"
				class="active-facets__button-remove focus-inset button button--simple"
			>
				<span>{{ 'products.facets.clear_all' | t }}</span>
			</a>
		</facet-remove>
	</div>
	<span id="ProductCount" class="visibility-hidden">
		{%- if results.results_count -%}
			{{
				'templates.search.results_with_count'
				| t: terms: results.terms, count: results.results_count
			}}
		{%- else -%}
			{% comment %}
				{{
					'products.facets.product_count_simple'
					| t: count: results.products_count
				}}
			{% endcomment %}
			{{
				'products.facets.product_count'
				| t:
					product_count: results.products_count,
					count: results.all_products_count
			}}
		{%- endif -%}
	</span>
</div>
